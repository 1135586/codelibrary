<code>
<font color="#7f0055"><b>#include</b></font>&nbsp;&lt;iostream&gt;<br/>
<font color="#7f0055"><b>#include</b></font>&nbsp;&lt;map&gt;<br/>
<font color="#7f0055"><b>using</b></font>&nbsp;<font color="#7f0055"><b>namespace</b></font>&nbsp;std;<br/>
<br/>
map&lt;<font color="#7f0055"><b>int</b></font>,&nbsp;<font color="#7f0055"><b>int</b></font>&gt;&nbsp;t;<br/>
<font color="#7f0055"><b>int</b></font>&nbsp;n;<br/>
<br/>
<font color="#7f0055"><b>void</b></font>&nbsp;<font color="#000000"><b>add</b></font>(<font color="#7f0055"><b>int</b></font>&nbsp;i,&nbsp;<font color="#7f0055"><b>int</b></font>&nbsp;value)&nbsp;{<br/>
&nbsp;&nbsp;<font color="#7f0055"><b>for</b></font>&nbsp;(;&nbsp;i&nbsp;&lt;&nbsp;n;&nbsp;i&nbsp;|=&nbsp;i&nbsp;+&nbsp;<font color="#990000"><b>1</b></font>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;t[i]&nbsp;+=&nbsp;value;<br/>
}<br/>
<br/>
<font color="#7f0055"><b>int</b></font>&nbsp;<font color="#000000"><b>sum</b></font>(<font color="#7f0055"><b>int</b></font>&nbsp;i)&nbsp;{<br/>
&nbsp;&nbsp;<font color="#7f0055"><b>int</b></font>&nbsp;res&nbsp;=&nbsp;<font color="#990000"><b>0</b></font>;<br/>
&nbsp;&nbsp;<font color="#7f0055"><b>for</b></font>&nbsp;(;&nbsp;i&nbsp;&gt;=&nbsp;<font color="#990000"><b>0</b></font>;&nbsp;i&nbsp;-=&nbsp;-~i&nbsp;&&nbsp;~i)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<font color="#7f0055"><b>if</b></font>&nbsp;(t.count(i))&nbsp;res&nbsp;+=&nbsp;t[i];<br/>
&nbsp;&nbsp;<font color="#7f0055"><b>return</b></font>&nbsp;res;<br/>
}<br/>
<br/>
<font color="#3F5FBF"><b>// sum[a,b]</b></font><br/>
<font color="#7f0055"><b>int</b></font>&nbsp;<font color="#000000"><b>sum</b></font>(<font color="#7f0055"><b>int</b></font>&nbsp;a,&nbsp;<font color="#7f0055"><b>int</b></font>&nbsp;b)&nbsp;{<br/>
&nbsp;&nbsp;<font color="#7f0055"><b>return</b></font>&nbsp;sum(b)&nbsp;-&nbsp;sum(a&nbsp;-&nbsp;<font color="#990000"><b>1</b></font>);<br/>
}<br/>
<br/>
<font color="#7f0055"><b>int</b></font>&nbsp;<font color="#000000"><b>get</b></font>(<font color="#7f0055"><b>int</b></font>&nbsp;i)&nbsp;{<br/>
&nbsp;&nbsp;<font color="#7f0055"><b>return</b></font>&nbsp;sum(i,&nbsp;i);<br/>
}<br/>
<br/>
<font color="#7f0055"><b>void</b></font>&nbsp;<font color="#000000"><b>set</b></font>(<font color="#7f0055"><b>int</b></font>&nbsp;i,&nbsp;<font color="#7f0055"><b>int</b></font>&nbsp;value)&nbsp;{<br/>
&nbsp;&nbsp;add(i,&nbsp;-get(i)&nbsp;+&nbsp;value);<br/>
}<br/>
<br/>
<font color="#3F5FBF"><b>// Usage example</b></font><br/>
<font color="#7f0055"><b>int</b></font>&nbsp;<font color="#000000"><b>main</b></font>()&nbsp;{<br/>
&nbsp;&nbsp;n&nbsp;=&nbsp;<font color="#990000"><b>4</b></font>;<br/>
&nbsp;&nbsp;set(<font color="#990000"><b>0</b></font>,&nbsp;<font color="#990000"><b>4</b></font>);<br/>
&nbsp;&nbsp;set(<font color="#990000"><b>1</b></font>,&nbsp;<font color="#990000"><b>5</b></font>);<br/>
&nbsp;&nbsp;set(<font color="#990000"><b>2</b></font>,&nbsp;<font color="#990000"><b>5</b></font>);<br/>
&nbsp;&nbsp;add(<font color="#990000"><b>2</b></font>,&nbsp;<font color="#990000"><b>5</b></font>);<br/>
<br/>
&nbsp;&nbsp;cout&nbsp;&lt;&lt;&nbsp;(<font color="#990000"><b>4</b></font>&nbsp;==&nbsp;get(<font color="#990000"><b>0</b></font>))&nbsp;&lt;&lt;&nbsp;endl;<br/>
&nbsp;&nbsp;cout&nbsp;&lt;&lt;&nbsp;(<font color="#990000"><b>19</b></font>&nbsp;==&nbsp;sum(<font color="#990000"><b>0</b></font>,&nbsp;<font color="#990000"><b>2</b></font>))&nbsp;&lt;&lt;&nbsp;endl;<br/>
&nbsp;&nbsp;cout&nbsp;&lt;&lt;&nbsp;(<font color="#990000"><b>15</b></font>&nbsp;==&nbsp;sum(<font color="#990000"><b>1</b></font>,&nbsp;<font color="#990000"><b>2</b></font>))&nbsp;&lt;&lt;&nbsp;endl;<br/>
}<br/>
</code>
